# Railway Environment Variables Setup

## MySQL Service Variables (Auto-generated by Railway)

These are the variables available from your MySQL service:

```
MYSQL_DATABASE="railway"
MYSQL_ROOT_PASSWORD="zbcVtEtDlwaldvPyBFQZSpiqxXiKbAFY"
MYSQLUSER="root"
MYSQLHOST="${{RAILWAY_PRIVATE_DOMAIN}}"
MYSQLPORT="3306"
MYSQLPASSWORD="${{MYSQL_ROOT_PASSWORD}}"
```

## Laravel App Service Variables

In your **Laravel App Service** → **Variables**, add these:

### Required Laravel Variables

```bash
APP_NAME="Community News Portal"
APP_ENV=production
APP_DEBUG=false
APP_KEY=base64:v0ZMjx+sruecz7smNjk4mcdqzIOLEf1MUEuiEgFur2U=
APP_URL=${{RAILWAY_PUBLIC_DOMAIN}}

# Database Connection (Reference MySQL Service Variables)
DB_CONNECTION=mysql
DB_HOST=${{MYSQLHOST}}
DB_PORT=${{MYSQLPORT}}
DB_DATABASE=${{MYSQLDATABASE}}
DB_USERNAME=${{MYSQLUSER}}
DB_PASSWORD=${{MYSQLPASSWORD}}

# Session & Cache
SESSION_DRIVER=database
CACHE_DRIVER=database
QUEUE_CONNECTION=database
```

## How to Set Up

### Method 1: Service Reference (Recommended - Easiest)

1. In your **Laravel App Service** dashboard
2. Click **"+ New"** → **"Add Reference"**
3. Select your **MySQL service**
4. Railway will automatically inject all MySQL variables with the `MYSQL*` prefix

Then add these Laravel-specific variables:
```bash
DB_CONNECTION=mysql
DB_HOST=${{MYSQLHOST}}
DB_PORT=${{MYSQLPORT}}
DB_DATABASE=${{MYSQLDATABASE}}
DB_USERNAME=${{MYSQLUSER}}
DB_PASSWORD=${{MYSQLPASSWORD}}
```

### Method 2: Manual Variable Entry

1. Go to your **Laravel App Service** → **Variables**
2. Click **"+ New Variable"**
3. Add each variable one by one:

**Copy these exactly:**

```bash
DB_CONNECTION=mysql
DB_HOST=${{MYSQLHOST}}
DB_PORT=3306
DB_DATABASE=${{MYSQLDATABASE}}
DB_USERNAME=${{MYSQLUSER}}
DB_PASSWORD=${{MYSQLPASSWORD}}
```

**Important:** Use Railway's variable reference syntax `${{VARIABLE_NAME}}` to reference variables from the MySQL service.

## Variable Reference Syntax

Railway uses `${{VARIABLE_NAME}}` syntax to reference variables from other services.

- `${{MYSQLHOST}}` - References the MySQL host from MySQL service
- `${{MYSQLDATABASE}}` - References the database name
- `${{MYSQLUSER}}` - References the MySQL username
- `${{MYSQLPASSWORD}}` - References the MySQL password
- `${{RAILWAY_PUBLIC_DOMAIN}}` - Your app's public domain (auto-set by Railway)

## Verify Connection

After setting variables, check your Laravel app logs:

1. Go to **Laravel App Service** → **Logs**
2. Look for:
   - "Database connection successful"
   - Migration output
   - No database connection errors

## Troubleshooting

**If database connection fails:**
- Verify MySQL service is running
- Check that variable references use `${{}}` syntax
- Ensure MySQL service is in the same Railway project
- Check that all DB_* variables are set correctly

**If migrations don't run:**
- Check startup logs for migration output
- Verify database credentials are correct
- Check that `DB_CONNECTION=mysql` is set

